"use strict";(self.webpackChunknets_cool_teacher=self.webpackChunknets_cool_teacher||[]).push([[44],{2044:(pi,X,c)=>{c.r(X),c.d(X,{ClasesModule:()=>di});var m=c(9808),Z=c(1083),t=c(5e3),ut=c(6286),x=c(6778);function mt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",7),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw().open(r)}),t.TgZ(1,"div",8),t._UZ(2,"img",9),t.TgZ(3,"p",10),t._uU(4),t.qZA(),t.TgZ(5,"p",11),t._uU(6),t.qZA(),t.TgZ(7,"p",11),t._uU(8),t.qZA(),t.TgZ(9,"p",12),t._uU(10),t.qZA()()()}if(2&i){const e=a.$implicit;t.xp6(2),t.Q6J("src",e.imagen,t.LSH),t.xp6(2),t.hij(" ",e.nombre," "),t.xp6(2),t.AsE(" ",e.periodo," ",e.fecha," "),t.xp6(2),t.hij(" Alumnos: ",e.numero_alumnos," "),t.xp6(2),t.hij(" ",e.descripcion," ")}}let _t=(()=>{class i{constructor(e,o,n){this.router=e,this.jwtAuth=o,this.provider=n,this.provider.BD_ActionPostHeder("clases","index",{}).subscribe({next:r=>{this.clases=r},error:r=>{}})}ngOnInit(){}open(e){this.router.navigate(["/clases/detail",btoa(e.id_materia_maestro),btoa(e.tbl_materias_id),btoa(e.tbl_grupo_id),btoa(e.tbl_periodo_id),btoa(e.fecha)])}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Z.F0),t.Y36(ut.t),t.Y36(x.H))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-clases"]],decls:9,vars:1,consts:[[1,"grid","grid-cols-12","px-18","gap-5","pb-8"],[1,"col-span-12"],[1,"text-gray-600","text-3xl","font-semibold"],[1,"text-gray-500","font-bold"],[1,"flex","items-center","justify-center"],[1,"grid","grid-cols-12","px-18","gap-5"],["class","2xl:col-span-3 xl:col-span-3 lg:col-span-3 md:col-span-6 sm:col-span-6 xm:col-span-12 col-span-12",3,"click",4,"ngFor","ngForOf"],[1,"2xl:col-span-3","xl:col-span-3","lg:col-span-3","md:col-span-6","sm:col-span-6","xm:col-span-12","col-span-12",3,"click"],[1,"bg-white","shadow-lg","hover:shadow-xl","hover:-mt-2","rounded-xl","h-60","w-full","cursor-pointer"],[1,"rounded-t-xl","max-h-28","w-full",3,"src"],[1,"pt-1","pr-3","pl-3","text-gray-500","font-bold"],[1,"text-sm","pt-0","pr-3","pl-3","text-gray-500","font-bold"],[1,"text-xs","font-light","text-gray-500","pt-3","pl-3","pr-3","pb-0"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"p",2),t._uU(3,"Clases"),t.qZA(),t.TgZ(4,"p",3),t._uU(5," Materias que estoy impartiendo "),t.qZA()()(),t.TgZ(6,"div",4)(7,"div",5),t.YNc(8,mt,11,6,"a",6),t.qZA()()),2&e&&(t.xp6(8),t.Q6J("ngForOf",o.clases))},directives:[m.sg],styles:[""]}),i})();var p=c(8966),s=c(3075),$=c(8675),F=c(4004),A=c(7261),g=c(7322),z=c(4107),G=c(508),k=c(7531),h=c(6856),C=c(7423),V=c(1433);function ft(i,a){if(1&i&&(t.TgZ(0,"mat-option",18),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.Q6J("value",e.id),t.xp6(1),t.AsE(" ",e.nombre_actividad," (",e.porcentaje,"%) ")}}let W=(()=>{class i{constructor(e,o,n,r){this.provider=e,this._snackBar=o,this.dialogRef=n,this.data=r,this.options=[{name:"Examen",value:50},{name:"Tarea",value:35},{name:"Proyecto",value:15}],this.barButtonOptions={active:!1,text:"A\xf1adir",buttonColor:"primary",barColor:"primary",raised:!0,stroked:!1,mode:"indeterminate",value:0,disabled:!1,fullWidth:!1},this.isDisable=!1,this.taskForm=new s.cw({nombre:new s.NI("",[s.kI.required]),tbl_parciales_task_tipo:new s.NI("",[s.kI.required]),fecha_publicacion:new s.NI("",[s.kI.required])}),this.filteredOptions=this.taskForm.valueChanges.pipe((0,$.O)(""),(0,F.U)(l=>"string"==typeof l?l:l.task),(0,F.U)(l=>l?this._filter(l):this.options.slice())),this.provider.BD_ActionPostHeder("clases","getListaParcialtask",{tbl_parciales_generales_id:this.data.data.data.id,tbl_materia_maestro_id:this.data.id_materia_maestro}).subscribe({next:l=>{this.lista=l},error:l=>{this._snackBar.open("Error","",{duration:5e3})}})}ngOnInit(){}_filter(e){return e?(e=e.toLowerCase(),this.options.filter(o=>-1!==o.name.toLowerCase().indexOf(e))):this.options}displayFn(e){return e&&e.name?e.name:""}onNoClick(){this.dialogRef.close()}cerrarDialogo(){this.dialogRef.close({success:!1})}confirmado(){this.barButtonOptions.active=!0,this.barButtonOptions.text="Procesando...",this.taskForm.value.tbl_materias_id=this.data.data.tbl_materias_id,this.taskForm.value.fecha=this.data.data.fecha,this.taskForm.value.tbl_grupo_id=this.data.data.tbl_grupo_id,this.taskForm.value.tbl_periodo_id=this.data.data.tbl_periodo_id,this.provider.BD_ActionPostHeder("clases","alumnosNuevaActividadParcial",this.taskForm.value).subscribe({next:o=>{1===o.Mensaje?(this._snackBar.open("Proceso ejecutado con exito","",{duration:5e3}),this.dialogRef.close(),this.barButtonOptions.active=!1,this.barButtonOptions.text="A\xf1adir"):(this._snackBar.open("Error","",{duration:5e3}),this.barButtonOptions.active=!1,this.barButtonOptions.text="A\xf1adir")},error:o=>{this._snackBar.open("Error","",{duration:5e3}),this.barButtonOptions.active=!1,this.barButtonOptions.text="A\xf1adir"}})}getDataPor(e,o){return this.isDisable=!0,this.taskForm.patchValue({porcentaje:o})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(x.H),t.Y36(A.ux),t.Y36(p.so),t.Y36(p.WI))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-task-dialog"]],decls:34,vars:6,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"example-form",3,"formGroup"],[1,"flex-auto","px-2","lg:px-10","py-10","pt-0"],[1,"flex","flex-wrap"],[1,"w-full","lg:w-12/12","px-2"],[1,"relative","w-full","mb-0"],["appearance","fill"],["formControlName","tbl_parciales_task_tipo"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","nombre"],["matInput","","formControlName","fecha_publicacion",3,"matDatepicker"],["matSuffix","",3,"for"],["color","primary"],["picker1",""],["mat-dialog-actions","","align","end"],["mat-button","",3,"click"],[3,"options","disabled","btnClick"],[3,"value"]],template:function(e,o){if(1&e&&(t.TgZ(0,"h1",0),t._uU(1,"Nueva actividad"),t.qZA(),t.TgZ(2,"div",1)(3,"form",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"mat-form-field",7)(9,"mat-label"),t._uU(10,"Tipo de actividad"),t.qZA(),t.TgZ(11,"mat-select",8),t.YNc(12,ft,2,3,"mat-option",9),t.qZA()()()(),t.TgZ(13,"div",5)(14,"div",6)(15,"mat-form-field",7)(16,"mat-label"),t._uU(17,"Nombre de la actividad"),t.qZA(),t._UZ(18,"input",10),t.qZA()()(),t.TgZ(19,"div",5)(20,"div",6)(21,"mat-form-field",7)(22,"mat-label"),t._uU(23,"Fecha de publicaci\xf3n"),t.qZA(),t._UZ(24,"input",11),t.TgZ(25,"mat-hint"),t._uU(26,"MM/DD/YYYY"),t.qZA(),t._UZ(27,"mat-datepicker-toggle",12)(28,"mat-datepicker",13,14),t.qZA()()()()()()(),t.TgZ(30,"div",15)(31,"button",16),t.NdJ("click",function(){return o.cerrarDialogo()}),t._uU(32,"Cerrar"),t.qZA(),t.TgZ(33,"mat-bar-button",17),t.NdJ("btnClick",function(){return o.confirmado()}),t.qZA()()),2&e){const n=t.MAs(29);t.xp6(3),t.Q6J("formGroup",o.taskForm),t.xp6(9),t.Q6J("ngForOf",o.lista),t.xp6(12),t.Q6J("matDatepicker",n),t.xp6(3),t.Q6J("for",n),t.xp6(6),t.Q6J("options",o.barButtonOptions)("disabled",o.taskForm.invalid)}},directives:[p.uh,p.xY,s._Y,s.JL,s.sg,g.KE,g.hX,z.gD,s.JJ,s.u,m.sg,G.ey,k.Nt,s.Fj,h.hl,g.bx,h.nW,g.R9,h.Mq,p.H8,C.lW,V.$n],styles:[".mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}"]}),i})();var d=c(8279);function gt(i,a){if(1&i&&(t.TgZ(0,"th",8),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.label," ")}}function ht(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",15)(1,"button",16),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return n.isEdit=!n.isEdit}),t._uU(2," Edit "),t.qZA()()}}function vt(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=t.oxw(2).$implicit,o=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e[o.key],"mediumDate")," ")}}function bt(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit,o=t.oxw().$implicit;t.xp6(1),t.hij(" ",e[o.key]," ")}}function xt(i,a){if(1&i&&(t.TgZ(0,"div",11),t.YNc(1,ht,3,0,"div",12),t.YNc(2,vt,3,4,"span",13),t.YNc(3,bt,2,1,"span",14),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.Q6J("ngSwitch",e.type),t.xp6(1),t.Q6J("ngSwitchCase","isEdit"),t.xp6(1),t.Q6J("ngSwitchCase","date")}}function Ct(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",15)(1,"button",16),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return n.isEdit=!n.isEdit}),t._uU(2," Done "),t.qZA()()}}function Tt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field",20)(1,"mat-label"),t._uU(2,"Choose a date"),t.qZA(),t.TgZ(3,"input",21),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).$implicit[t.oxw().$implicit.key]=n}),t.qZA(),t._UZ(4,"mat-datepicker-toggle",22)(5,"mat-datepicker",null,23),t.qZA()}if(2&i){const e=t.MAs(6),o=t.oxw(2).$implicit,n=t.oxw().$implicit;t.xp6(3),t.Q6J("matDatepicker",e)("ngModel",o[n.key]),t.xp6(1),t.Q6J("for",e)}}function wt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field",24)(1,"input",25),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).$implicit[t.oxw().$implicit.key]=n}),t.qZA()()}if(2&i){const e=t.oxw(2).$implicit,o=t.oxw().$implicit;t.xp6(1),t.Q6J("ngModel",e[o.key])}}function kt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field",24)(1,"input",26),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).$implicit[t.oxw().$implicit.key]=n}),t.qZA()()}if(2&i){const e=t.oxw(2).$implicit,o=t.oxw().$implicit;t.xp6(1),t.Q6J("type",o.type)("ngModel",e[o.key])}}function Dt(i,a){if(1&i&&(t.TgZ(0,"div",11),t.YNc(1,Ct,3,0,"div",12),t.YNc(2,Tt,7,3,"mat-form-field",17),t.YNc(3,wt,2,1,"mat-form-field",18),t.YNc(4,kt,2,2,"mat-form-field",19),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.Q6J("ngSwitch",e.type),t.xp6(1),t.Q6J("ngSwitchCase","isEdit"),t.xp6(1),t.Q6J("ngSwitchCase","date"),t.xp6(1),t.Q6J("ngSwitchCase","number")}}function yt(i,a){if(1&i&&(t.TgZ(0,"td",9),t.YNc(1,xt,4,3,"div",10),t.YNc(2,Dt,5,4,"div",10),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",!e.isEdit),t.xp6(1),t.Q6J("ngIf",e.isEdit)}}function St(i,a){1&i&&(t.ynx(0,5),t.YNc(1,gt,2,1,"th",6),t.YNc(2,yt,3,2,"td",7),t.BQk()),2&i&&t.Q6J("matColumnDef",a.$implicit.key)}function Zt(i,a){1&i&&t._UZ(0,"tr",27)}function At(i,a){1&i&&t._UZ(0,"tr",28)}const Et=[{name:"John Smith",occupation:"Advisor",dateOfBirth:"1984-05-05",age:36},{name:"Muhi Masri",occupation:"Developer",dateOfBirth:"1992-02-02",age:28},{name:"Peter Adams",occupation:"HR",dateOfBirth:"2000-01-01",age:20},{name:"Lora Bay",occupation:"Marketing",dateOfBirth:"1977-03-03",age:43}],K=[{key:"name",type:"text",label:"Full Name"},{key:"occupation",type:"text",label:"Occupation"},{key:"dateOfBirth",type:"date",label:"Date of Birth"},{key:"age",type:"number",label:"Age"},{key:"isEdit",type:"isEdit",label:""}];let Nt=(()=>{class i{constructor(e){this.dialog=e,this.displayedColumns2=K.map(o=>o.key),this.dataSource2=Et,this.columnsSchema=K}ngOnInit(){}addTask(){const e=Math.floor(900*Math.random()+100).toString();this.columnsSchema.push({key:e,type:"text",label:"Nueva Columna"}),this.displayedColumns2.push(e),this.dataSource2.forEach((o,n,r)=>{})}openDialog(){this.dialog.open(W,{width:"50%"}).afterClosed().subscribe(o=>{})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(p.uw))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-detail-parciales"]],decls:8,vars:4,consts:[[3,"click"],["mat-table","",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell",""],["mat-cell",""],[3,"ngSwitch",4,"ngIf"],[3,"ngSwitch"],["class","btn-edit",4,"ngSwitchCase"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"btn-edit"],["mat-button","",3,"click"],["class","form-input","appearance","fill",4,"ngSwitchCase"],["class","form-input",4,"ngSwitchCase"],["class","form-input",4,"ngSwitchDefault"],["appearance","fill",1,"form-input"],["matInput","",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["picker",""],[1,"form-input"],["type","number","matInput","",3,"ngModel","ngModelChange"],["matInput","",3,"type","ngModel","ngModelChange"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return o.addTask()}),t._uU(1,"Agregar"),t.qZA(),t.TgZ(2,"button",0),t.NdJ("click",function(){return o.openDialog()}),t._uU(3,"Nueva actividad"),t.qZA(),t.TgZ(4,"table",1),t.YNc(5,St,3,1,"ng-container",2),t.YNc(6,Zt,1,0,"tr",3),t.YNc(7,At,1,0,"tr",4),t.qZA()),2&e&&(t.xp6(4),t.Q6J("dataSource",o.dataSource2),t.xp6(1),t.Q6J("ngForOf",o.columnsSchema),t.xp6(1),t.Q6J("matHeaderRowDef",o.displayedColumns2),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns2))},directives:[d.BZ,m.sg,d.w1,d.fO,d.ge,d.Dz,d.ev,m.O5,m.RF,m.n9,C.lW,m.ED,g.KE,g.hX,k.Nt,h.hl,s.Fj,s.JJ,s.On,h.nW,g.R9,h.Mq,s.wV,d.as,d.XQ,d.nj,d.Gk],pipes:[m.uU],styles:["table[_ngcontent-%COMP%]{width:100%}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:25%}"]}),i})();var tt=c(6087),J=c(4847);let Mt=(()=>{class i{constructor(e,o,n,r){this.provider=e,this.dialogRef=o,this.data=n,this._snackBar=r,this.taskForm=new s.cw({id:new s.NI(""),calificacion:new s.NI("",[s.kI.required]),observaciones:new s.NI(""),fecha_entrega:new s.NI("",[s.kI.required])}),this.cargaInicial()}ngOnInit(){}cargaInicial(){this.provider.BD_ActionPostHeder("clases","getTaskScore",{id:this.data.id}).subscribe({next:e=>{this.taskForm.get("id").setValue(e[0].id),this.taskForm.get("calificacion").setValue(e[0].calificacion),this.taskForm.get("fecha_entrega").setValue(e[0].fecha_entrega),this.taskForm.get("observaciones").setValue(e[0].observaciones)},error:e=>{this._snackBar.open("Error","",{duration:5e3})}})}onNoClick(){this.dialogRef.close()}cerrarDialogo(){this.dialogRef.close({success:!1})}confirmado(){const e=this.taskForm.value;console.log(e),this.provider.BD_ActionPostHeder("clases","updateTaskScore",e).subscribe({next:o=>{console.log(o),1===o.Mensaje?(this._snackBar.open("Proceso ejecutado con exito","",{duration:5e3}),this.dialogRef.close()):this._snackBar.open("Error","",{duration:5e3})},error:o=>{this._snackBar.open("Error","",{duration:5e3})}})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(x.H),t.Y36(p.so),t.Y36(p.WI),t.Y36(A.ux))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-task-score"]],decls:34,vars:3,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"example-form",3,"formGroup"],[1,"flex-auto","px-2","lg:px-10","py-10","pt-0"],[1,"flex","flex-wrap"],[1,"w-full","lg:w-12/12","px-2"],[1,"relative","w-full","mb-0"],["appearance","fill"],["matInput","","formControlName","calificacion","required","","pattern","^[0-9]+([.])?([0-9]+)?$"],["matInput","","formControlName","fecha_entrega",3,"matDatepicker"],["matSuffix","",3,"for"],["color","primary"],["picker1",""],["matInput","","formControlName","observaciones"],["mat-dialog-actions","","align","end"],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"h1",0),t._uU(1,"Asignar calificaci\xf3n"),t.qZA(),t.TgZ(2,"div",1)(3,"form",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"mat-form-field",7)(9,"mat-label"),t._uU(10,"Calificaci\xf3n"),t.qZA(),t._UZ(11,"input",8),t.qZA()()(),t.TgZ(12,"div",5)(13,"div",6)(14,"mat-form-field",7)(15,"mat-label"),t._uU(16,"Fecha de entrega"),t.qZA(),t._UZ(17,"input",9),t.TgZ(18,"mat-hint"),t._uU(19,"MM/DD/YYYY"),t.qZA(),t._UZ(20,"mat-datepicker-toggle",10)(21,"mat-datepicker",11,12),t.qZA()()(),t.TgZ(23,"div",5)(24,"div",6)(25,"mat-form-field",7)(26,"mat-label"),t._uU(27,"Observaciones"),t.qZA(),t._UZ(28,"textarea",13),t.qZA()()()()()()(),t.TgZ(29,"div",14)(30,"button",15),t.NdJ("click",function(){return o.cerrarDialogo()}),t._uU(31,"Cerrar"),t.qZA(),t.TgZ(32,"button",16),t.NdJ("click",function(){return o.confirmado()}),t._uU(33,"Asignar"),t.qZA()()),2&e){const n=t.MAs(22);t.xp6(3),t.Q6J("formGroup",o.taskForm),t.xp6(14),t.Q6J("matDatepicker",n),t.xp6(3),t.Q6J("for",n)}},directives:[p.uh,p.xY,s._Y,s.JL,s.sg,g.KE,g.hX,k.Nt,s.Fj,s.JJ,s.u,s.Q7,s.c5,h.hl,g.bx,h.nW,g.R9,h.Mq,p.H8,C.lW],styles:[".mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}"]}),i})(),Ot=(()=>{class i{constructor(e,o,n,r){this.provider=e,this.dialogRef=o,this.data=n,this._snackBar=r,this.taskForm=new s.cw({task:new s.NI("",[s.kI.required]),porcentaje:new s.NI("",[s.kI.required])})}ngOnInit(){}onNoClick(){this.dialogRef.close()}cerrarDialogo(){this.dialogRef.close({success:!1})}confirmado(){this.taskForm.value.id_materia_maestro=this.data.id_materia_maestro,this.taskForm.value.id_parciales_generales=this.data.data.data.id,this.provider.BD_ActionPostHeder("clases","createTipoActividad",this.taskForm.value).subscribe({next:o=>{1===o.Mensaje?(this._snackBar.open("Proceso ejecutado con exito","",{duration:5e3}),this.dialogRef.close()):this._snackBar.open("Error","",{duration:5e3})},error:o=>{this._snackBar.open("Error","",{duration:5e3})}})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(x.H),t.Y36(p.so),t.Y36(p.WI),t.Y36(A.ux))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-tipo-actividad-dialog"]],decls:23,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"example-form",3,"formGroup"],[1,"flex-auto","px-2","lg:px-10","py-10","pt-0"],[1,"flex","flex-wrap"],[1,"w-full","lg:w-12/12","px-2"],[1,"relative","w-full","mb-0"],["appearance","fill"],["matInput","","formControlName","task"],["matInput","","formControlName","porcentaje"],["mat-dialog-actions","","align","end"],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"h1",0),t._uU(1,"A\xf1adir tipo de actividad"),t.qZA(),t.TgZ(2,"div",1)(3,"form",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"mat-form-field",7)(9,"mat-label"),t._uU(10,"Nombre del tipo de actividad"),t.qZA(),t._UZ(11,"input",8),t.qZA()()(),t.TgZ(12,"div",5)(13,"div",6)(14,"mat-form-field",7)(15,"mat-label"),t._uU(16,"Valor porcentual"),t.qZA(),t._UZ(17,"input",9),t.qZA()()()()()()(),t.TgZ(18,"div",10)(19,"button",11),t.NdJ("click",function(){return o.cerrarDialogo()}),t._uU(20,"Cerrar"),t.qZA(),t.TgZ(21,"button",12),t.NdJ("click",function(){return o.confirmado()}),t._uU(22,"A\xf1adir"),t.qZA()()),2&e&&(t.xp6(3),t.Q6J("formGroup",o.taskForm))},directives:[p.uh,p.xY,s._Y,s.JL,s.sg,g.KE,g.hX,k.Nt,s.Fj,s.JJ,s.u,p.H8,C.lW],styles:[".mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}"]}),i})();var Ft=c(7291);let Pt=(()=>{class i{constructor(e,o,n){this.dialogRef=e,this.data=o,this.provider=n,this.baseUrl=Ft.N.apiUrlBase+"assets/mentores/"}onNoClick(){this.dialogRef.close()}ngOnInit(){}cerrarDialogo(){this.dialogRef.close(!1)}confirmado(){this.dialogRef.close(!0)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(p.so),t.Y36(p.WI),t.Y36(x.H))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-dialogo-confirmacion"]],decls:11,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],[1,"flex","text-sm","text-white","font-bold","disabled:bg-gray-300","bg-red-500","p-2","rounded-tl-lg","rounded-bl-lg","rounded-tr-lg","rounded-br-lg","sm:mr-0",3,"click"],["mat-button","","cdkFocusInitial","",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"h1",0),t._uU(1,"Confirmaci\xf3n"),t.qZA(),t.TgZ(2,"div",1)(3,"p"),t._uU(4),t.qZA()(),t.TgZ(5,"div",2)(6,"button",3),t.NdJ("click",function(){return o.cerrarDialogo()}),t._uU(7,"No"),t.qZA(),t._uU(8," \xa0\xa0 "),t.TgZ(9,"button",4),t.NdJ("click",function(){return o.confirmado()}),t._uU(10,"S\xed"),t.qZA()()),2&e&&(t.xp6(4),t.Oqu(o.data))},directives:[p.uh,p.xY,p.H8,C.lW],styles:[""]}),i})();var D=c(2181),R=c(5245);function It(i,a){if(1&i&&(t.TgZ(0,"mat-option",21),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.Q6J("value",e.id),t.xp6(1),t.AsE(" ",e.nombre_actividad," (",e.porcentaje,"%) ")}}let Jt=(()=>{class i{constructor(e,o,n,r,l){this.dialogo=e,this.provider=o,this._snackBar=n,this.dialogRef=r,this.data=l,this.options=[{name:"Examen",value:50},{name:"Tarea",value:35},{name:"Proyecto",value:15}],this.barButtonOptions={active:!1,text:"Guardar",buttonColor:"primary",barColor:"primary",raised:!0,stroked:!1,mode:"indeterminate",value:0,disabled:!1,fullWidth:!1},this.isDisable=!1,this.nombre="",this.taskForm=new s.cw({codigo:new s.NI(""),nombre:new s.NI("",[s.kI.required]),tbl_parciales_task_tipo:new s.NI("",[s.kI.required]),fecha_publicacion:new s.NI("",[s.kI.required])}),this.cargaInicial(),this.filteredOptions=this.taskForm.valueChanges.pipe((0,$.O)(""),(0,F.U)(u=>"string"==typeof u?u:u.task),(0,F.U)(u=>u?this._filter(u):this.options.slice())),this.provider.BD_ActionPostHeder("clases","getListaParcialtask",{tbl_parciales_generales_id:this.data.data.data.id,tbl_materia_maestro_id:this.data.id_materia_maestro}).subscribe({next:u=>{this.lista=u},error:u=>{this._snackBar.open("Error","",{duration:5e3})}})}ngOnInit(){}_filter(e){return e?(e=e.toLowerCase(),this.options.filter(o=>-1!==o.name.toLowerCase().indexOf(e))):this.options}displayFn(e){return e&&e.name?e.name:""}onNoClick(){this.dialogRef.close()}cerrarDialogo(){this.dialogRef.close({success:!1})}cargaInicial(){this.provider.BD_ActionPostHeder("clases","getTask",{id:this.data.id}).subscribe({next:e=>{this.nombre=e.nombre,this.taskForm.get("codigo").setValue(e.codigo),this.taskForm.get("nombre").setValue(e.nombre),this.taskForm.get("tbl_parciales_task_tipo").setValue(e.tbl_parciales_task_tipo),this.taskForm.get("fecha_publicacion").setValue(e.fecha_publicacion)},error:e=>{this._snackBar.open("Error","",{duration:5e3})}})}confirmado(){this.barButtonOptions.active=!0,this.barButtonOptions.text="Procesando...",this.provider.BD_ActionPostHeder("clases","alumnosUpdateActividadParcial",this.taskForm.value).subscribe({next:o=>{1===o.Mensaje?(this._snackBar.open("Proceso ejecutado con exito","",{duration:5e3}),console.log("Regresando respuesta"),this.dialogRef.close(),this.barButtonOptions.active=!1,this.barButtonOptions.text="Guardar"):(this._snackBar.open("Error","",{duration:5e3}),this.barButtonOptions.active=!1,this.barButtonOptions.text="Guardar")},error:o=>{this._snackBar.open("Error","",{duration:5e3}),this.barButtonOptions.active=!1,this.barButtonOptions.text="Guardar"}})}confirmado2(){this.provider.BD_ActionPostHeder("clases","alumnosDeleteActividadParcial",this.taskForm.value).subscribe({next:o=>{console.log(o),1===o.Mensaje?(this._snackBar.open("Proceso ejecutado con exito","",{duration:5e3}),console.log("Regresando respuesta"),this.dialogRef.close()):this._snackBar.open("Error","",{duration:5e3})},error:o=>{this._snackBar.open("Error","",{duration:5e3})}})}getDataPor(e,o){return this.isDisable=!0,this.taskForm.patchValue({porcentaje:o})}mostrarDialogo(){this.dialogo.open(Pt,{data:"\xbfSeguro que deseas eliminar la actividad?"}).afterClosed().subscribe(e=>{e&&this.confirmado2()})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(p.uw),t.Y36(x.H),t.Y36(A.ux),t.Y36(p.so),t.Y36(p.WI))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-task-dialog-detail"]],decls:41,vars:8,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"example-form",3,"formGroup"],[1,"flex-auto","px-2","lg:px-10","py-10","pt-0"],[1,"flex","flex-wrap"],[1,"w-full","lg:w-12/12","px-2"],[1,"relative","w-full","mb-0"],["appearance","fill"],["formControlName","tbl_parciales_task_tipo"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","nombre"],["matInput","","formControlName","fecha_publicacion",3,"matDatepicker"],["matSuffix","",3,"for"],["color","primary"],["picker1",""],["mat-dialog-actions","","align","end"],["mat-button","",3,"click"],[3,"options","disabled","btnClick"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],[3,"value"]],template:function(e,o){if(1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.qZA(),t.TgZ(2,"div",1)(3,"form",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"mat-form-field",7)(9,"mat-label"),t._uU(10,"Tipo de actividad"),t.qZA(),t.TgZ(11,"mat-select",8),t.YNc(12,It,2,3,"mat-option",9),t.qZA()()()(),t.TgZ(13,"div",5)(14,"div",6)(15,"mat-form-field",7)(16,"mat-label"),t._uU(17,"Nombre de la actividad"),t.qZA(),t._UZ(18,"input",10),t.qZA()()(),t.TgZ(19,"div",5)(20,"div",6)(21,"mat-form-field",7)(22,"mat-label"),t._uU(23,"Fecha de publicaci\xf3n"),t.qZA(),t._UZ(24,"input",11),t.TgZ(25,"mat-hint"),t._uU(26,"MM/DD/YYYY"),t.qZA(),t._UZ(27,"mat-datepicker-toggle",12)(28,"mat-datepicker",13,14),t.qZA()()()()()()(),t.TgZ(30,"div",15)(31,"button",16),t.NdJ("click",function(){return o.cerrarDialogo()}),t._uU(32,"Cerrar"),t.qZA(),t.TgZ(33,"mat-bar-button",17),t.NdJ("btnClick",function(){return o.confirmado()}),t.qZA(),t.TgZ(34,"button",18)(35,"mat-icon"),t._uU(36,"more_vert"),t.qZA()(),t.TgZ(37,"mat-menu",null,19)(39,"button",20),t.NdJ("click",function(){return o.mostrarDialogo()}),t._uU(40,"Eliminar"),t.qZA()()()),2&e){const n=t.MAs(29),r=t.MAs(38);t.xp6(1),t.hij("Actividad: ",o.nombre,""),t.xp6(2),t.Q6J("formGroup",o.taskForm),t.xp6(9),t.Q6J("ngForOf",o.lista),t.xp6(12),t.Q6J("matDatepicker",n),t.xp6(3),t.Q6J("for",n),t.xp6(6),t.Q6J("options",o.barButtonOptions)("disabled",o.taskForm.invalid),t.xp6(1),t.Q6J("matMenuTriggerFor",r)}},directives:[p.uh,p.xY,s._Y,s.JL,s.sg,g.KE,g.hX,z.gD,s.JJ,s.u,m.sg,G.ey,k.Nt,s.Fj,h.hl,g.bx,h.nW,g.R9,h.Mq,p.H8,C.lW,V.$n,D.p6,R.Hw,D.VK,D.OP],styles:[""]}),i})();var Rt=c(1135),Yt=c(7579),Ut=c(9300),qt=c(2722),b=c(1777),Ht=c(2313);const Bt=["overlay"];function jt(i,a){1&i&&t._UZ(0,"div")}function Qt(i,a){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,jt,1,0,"div",6),t.qZA()),2&i){const e=t.oxw(2);t.Tol(e.spinner.class),t.Udp("color",e.spinner.color),t.xp6(1),t.Q6J("ngForOf",e.spinner.divArray)}}function Lt(i,a){if(1&i&&(t._UZ(0,"div",7),t.ALo(1,"safeHtml")),2&i){const e=t.oxw(2);t.Q6J("innerHTML",t.lcZ(1,1,e.template),t.oJD)}}function Xt(i,a){if(1&i&&(t.TgZ(0,"div",1,2),t.YNc(2,Qt,2,5,"div",3),t.YNc(3,Lt,2,3,"div",4),t.TgZ(4,"div",5),t.Hsn(5),t.qZA()()),2&i){const e=t.oxw();t.Udp("background-color",e.spinner.bdColor)("z-index",e.spinner.zIndex)("position",e.spinner.fullScreen?"fixed":"absolute"),t.Q6J("@.disabled",e.disableAnimation)("@fadeIn","in"),t.xp6(2),t.Q6J("ngIf",!e.template),t.xp6(1),t.Q6J("ngIf",e.template),t.xp6(1),t.Udp("z-index",e.spinner.zIndex)}}const $t=["*"],zt={"ball-8bits":16,"ball-atom":4,"ball-beat":3,"ball-circus":5,"ball-climbing-dot":4,"ball-clip-rotate":1,"ball-clip-rotate-multiple":2,"ball-clip-rotate-pulse":2,"ball-elastic-dots":5,"ball-fall":3,"ball-fussion":4,"ball-grid-beat":9,"ball-grid-pulse":9,"ball-newton-cradle":4,"ball-pulse":3,"ball-pulse-rise":5,"ball-pulse-sync":3,"ball-rotate":1,"ball-running-dots":5,"ball-scale":1,"ball-scale-multiple":3,"ball-scale-pulse":2,"ball-scale-ripple":1,"ball-scale-ripple-multiple":3,"ball-spin":8,"ball-spin-clockwise":8,"ball-spin-clockwise-fade":8,"ball-spin-clockwise-fade-rotating":8,"ball-spin-fade":8,"ball-spin-fade-rotating":8,"ball-spin-rotate":2,"ball-square-clockwise-spin":8,"ball-square-spin":8,"ball-triangle-path":3,"ball-zig-zag":2,"ball-zig-zag-deflect":2,cog:1,"cube-transition":2,fire:3,"line-scale":5,"line-scale-party":5,"line-scale-pulse-out":5,"line-scale-pulse-out-rapid":5,"line-spin-clockwise-fade":8,"line-spin-clockwise-fade-rotating":8,"line-spin-fade":8,"line-spin-fade-rotating":8,pacman:6,"square-jelly-box":2,"square-loader":1,"square-spin":1,timer:1,"triangle-skew-spin":1},U="primary";class T{constructor(a){Object.assign(this,a)}static create(a){return(null==(null==a?void 0:a.type)||0===a.type.length)&&console.warn('[ngx-spinner]: Property "type" is missed. Please, provide animation type to <ngx-spinner> component\n        and ensure css is added to angular.json file'),new T(a)}}let et=(()=>{class i{constructor(){this.spinnerObservable=new Rt.X(null)}getSpinner(e){return this.spinnerObservable.asObservable().pipe((0,Ut.h)(o=>o&&o.name===e))}show(e=U,o){return new Promise((n,r)=>{setTimeout(()=>{o&&Object.keys(o).length?(o.name=e,this.spinnerObservable.next(new T(Object.assign(Object.assign({},o),{show:!0}))),n(!0)):(this.spinnerObservable.next(new T({name:e,show:!0})),n(!0))},10)})}hide(e=U,o=10){return new Promise((n,r)=>{setTimeout(()=>{this.spinnerObservable.next(new T({name:e,show:!1})),n(!0)},o)})}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Gt=(()=>{class i{constructor(e){this._sanitizer=e}transform(e){if(e)return this._sanitizer.bypassSecurityTrustHtml(e)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Ht.H7,16))},i.\u0275pipe=t.Yjl({name:"safeHtml",type:i,pure:!0}),i})(),Vt=(()=>{class i{constructor(e,o,n){this.spinnerService=e,this.changeDetector=o,this.elementRef=n,this.disableAnimation=!1,this.spinner=new T,this.ngUnsubscribe=new Yt.x,this.setDefaultOptions=()=>{this.spinner=T.create({name:this.name,bdColor:this.bdColor,size:this.size,color:this.color,type:this.type,fullScreen:this.fullScreen,divArray:this.divArray,divCount:this.divCount,show:this.show,zIndex:this.zIndex,template:this.template,showSpinner:this.showSpinner})},this.bdColor="rgba(51,51,51,0.8)",this.zIndex=99999,this.color="#fff",this.size="large",this.fullScreen=!0,this.name=U,this.template=null,this.showSpinner=!1,this.divArray=[],this.divCount=0,this.show=!1}handleKeyboardEvent(e){this.spinnerDOM&&this.spinnerDOM.nativeElement&&(this.fullScreen||!this.fullScreen&&this.isSpinnerZone(e.target))&&(e.returnValue=!1,e.preventDefault())}initObservable(){this.spinnerService.getSpinner(this.name).pipe((0,qt.R)(this.ngUnsubscribe)).subscribe(e=>{this.setDefaultOptions(),Object.assign(this.spinner,e),e.show&&this.onInputChange(),this.changeDetector.detectChanges()})}ngOnInit(){this.setDefaultOptions(),this.initObservable()}isSpinnerZone(e){return e===this.elementRef.nativeElement.parentElement||e.parentNode&&this.isSpinnerZone(e.parentNode)}ngOnChanges(e){for(const o in e)if(o){const n=e[o];if(n.isFirstChange())return;void 0!==n.currentValue&&n.currentValue!==n.previousValue&&""!==n.currentValue&&(this.spinner[o]=n.currentValue,"showSpinner"===o&&(n.currentValue?this.spinnerService.show(this.spinner.name,this.spinner):this.spinnerService.hide(this.spinner.name)),"name"===o&&this.initObservable())}}getClass(e,o){this.spinner.divCount=zt[e],this.spinner.divArray=Array(this.spinner.divCount).fill(0).map((r,l)=>l);let n="";switch(o.toLowerCase()){case"small":n="la-sm";break;case"medium":n="la-2x";break;case"large":n="la-3x"}return"la-"+e+" "+n}onInputChange(){this.spinner.class=this.getClass(this.spinner.type,this.spinner.size)}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(et),t.Y36(t.sBO),t.Y36(t.SBq))},i.\u0275cmp=t.Xpm({type:i,selectors:[["ngx-spinner"]],viewQuery:function(e,o){if(1&e&&t.Gf(Bt,5),2&e){let n;t.iGM(n=t.CRH())&&(o.spinnerDOM=n.first)}},hostBindings:function(e,o){1&e&&t.NdJ("keydown",function(r){return o.handleKeyboardEvent(r)},!1,t.evT)},inputs:{bdColor:"bdColor",size:"size",color:"color",type:"type",fullScreen:"fullScreen",name:"name",zIndex:"zIndex",template:"template",showSpinner:"showSpinner",disableAnimation:"disableAnimation"},features:[t.TTD],ngContentSelectors:$t,decls:1,vars:1,consts:[["class","ngx-spinner-overlay",3,"background-color","z-index","position",4,"ngIf"],[1,"ngx-spinner-overlay"],["overlay",""],[3,"class","color",4,"ngIf"],[3,"innerHTML",4,"ngIf"],[1,"loading-text"],[4,"ngFor","ngForOf"],[3,"innerHTML"]],template:function(e,o){1&e&&(t.F$t(),t.YNc(0,Xt,6,12,"div",0)),2&e&&t.Q6J("ngIf",o.spinner.show)},directives:[m.O5,m.sg],pipes:[Gt],styles:[".ngx-spinner-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%}.ngx-spinner-overlay[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(.loading-text){top:50%;left:50%;margin:0;position:absolute;transform:translate(-50%,-50%)}.loading-text[_ngcontent-%COMP%]{position:absolute;top:60%;left:50%;transform:translate(-50%,-60%)}"],data:{animation:[(0,b.X$)("fadeIn",[(0,b.SB)("in",(0,b.oB)({opacity:1})),(0,b.eR)(":enter",[(0,b.oB)({opacity:0}),(0,b.jt)(300)]),(0,b.eR)(":leave",(0,b.jt)(200,(0,b.oB)({opacity:0})))])]},changeDetection:0}),i})(),Wt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[m.ez]]}),i})();var Kt=c(7796),y=c(655),v="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0;function q(i,a,e){var o=new XMLHttpRequest;o.open("GET",i),o.responseType="blob",o.onload=function(){I(o.response,a,e)},o.onerror=function(){console.error("could not download file")},o.send()}function it(i){var a=new XMLHttpRequest;a.open("HEAD",i,!1);try{a.send()}catch(e){}return a.status>=200&&a.status<=299}function P(i){try{i.dispatchEvent(new MouseEvent("click"))}catch(e){var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),i.dispatchEvent(a)}}var ot=v.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),I=v.saveAs||("object"!=typeof window||window!==v?function(){}:"download"in HTMLAnchorElement.prototype&&!ot?function(a,e,o){var n=v.URL||v.webkitURL,r=document.createElement("a");r.download=e=e||a.name||"download",r.rel="noopener","string"==typeof a?(r.href=a,r.origin!==location.origin?it(r.href)?q(a,e,o):P(r,r.target="_blank"):P(r)):(r.href=n.createObjectURL(a),setTimeout(function(){n.revokeObjectURL(r.href)},4e4),setTimeout(function(){P(r)},0))}:"msSaveOrOpenBlob"in navigator?function(a,e,o){if(e=e||a.name||"download","string"==typeof a)if(it(a))q(a,e,o);else{var n=document.createElement("a");n.href=a,n.target="_blank",setTimeout(function(){P(n)})}else navigator.msSaveOrOpenBlob(function te(i,a){return void 0===a?a={autoBom:!1}:"object"!=typeof a&&(console.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob([String.fromCharCode(65279),i],{type:i.type}):i}(a,o),e)}:function(a,e,o,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),"string"==typeof a)return q(a,e,o);var r="application/octet-stream"===a.type,l=/constructor/i.test(v.HTMLElement)||v.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||r&&l||ot)&&"undefined"!=typeof FileReader){var f=new FileReader;f.onloadend=function(){var O=f.result;O=u?O:O.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=O:location=O,n=null},f.readAsDataURL(a)}else{var M=v.URL||v.webkitURL,L=M.createObjectURL(a);n?n.location=L:location.href=L,n=null,setTimeout(function(){M.revokeObjectURL(L)},4e4)}});v.saveAs=I.saveAs=I;let ee=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[Kt.HT]]}),i})();var _=(()=>{return(i=_||(_={})).XLS="xls",i.XLSX="xlsx",i.CSV="csv",i.TXT="txt",i.JSON="json",i.OTHER="other",_;var i})();let at=(()=>{class i{constructor(){}extractRows(e,o,n){return this.getRowsAsJsonArray(e,o,null!=n?n:e._rowOutlet)}getRowsAsJsonArray(e,o,n){const r=this.getRenderedRows(e,n);return this.convertToJsonArray(o,r)}getRenderedRows(e,o){return e._getRenderedRows(o)}convertToJsonArray(e,o){const n=new Array;for(let r=0;r<o.length;r++){const l=this.convertRow(e,o[r]);n.push(this.createExcelItem(l))}return n}convertRow(e,o){const n=new Array,r=o.children;for(let l=0;l<r.length;l++)if(!this.shouldHide(e,l)){const u=r.item(l).innerText.trim();n.push(u)}return n}shouldHide(e,o){return!(!e||!e.includes(o))}createExcelItem(e){return Object.assign({},e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=(0,t.Yz7)({factory:function(){return new i},token:i,providedIn:"root"}),i})();class E{constructor(a,e){this.extension=a,this.contentTypeHeader=e}}const N=";charset=utf-8",H=_.TXT+"/",nt="application/octet-stream",w=".",re=w+_.XLSX,se=w+_.CSV,le=w+_.JSON,ce=w+_.TXT,de=new E(w+_.XLS,nt+N),pe=new E(re,nt+N),ue=new E(le,H+JSON+N),me=new E(ce,H+_.TXT+N),_e=new E(se,H+_.CSV+N),fe=".*."+_.XLS+"$",B=new t.OlP("XLSX_LIGHTWEIGHT");class j{static save(a,e,o){const n=new Blob([a],{type:e.contentTypeHeader});let r="mat-table-exporter";o&&o.fileName&&(r=o.fileName),I(n,r+e.extension)}static isXls(a){return null!=a.toLowerCase().match(fe)}static identifyExportType(a){return a&&j.isXls(a)?_.XLS:_.XLSX}static removeExtension(a){a.fileName=a.fileName.split(w)[0]}}class Q{constructor(){}export(a,e){if(!a)throw new Error("Empty json array is provided, rows parameter is mandatory!");const o=this.getMimeType();this.createContent(a,e).then(n=>{j.save(n,o,e)})}}class rt extends Q{constructor(a){super(),this.sheetJsHelper=a}createContent(a,e){return(0,y.mG)(this,void 0,void 0,function*(){const o=(yield this.sheetJsHelper.getXlsx()).utils.json_to_sheet(a,{skipHeader:!0});return yield this.workSheetToContent(o,e)})}}let S=(()=>{class i{constructor(e){this.xlsxLightweight=e}getXlsx(){return(0,y.mG)(this,void 0,void 0,function*(){return this.xlsxLightweight?yield c.e(557).then(c.t.bind(c,7557,23)):yield c.e(239).then(c.t.bind(c,5239,23))})}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(B,8))},i.\u0275prov=(0,t.Yz7)({factory:function(){return new i((0,t.LFG)(B,8))},token:i,providedIn:"root"}),i})(),xe=(()=>{class i extends rt{constructor(e){super(e)}workSheetToContent(e,o){var n;return(0,y.mG)(this,void 0,void 0,function*(){return"\ufeff"+(yield this.sheetJsHelper.getXlsx()).utils.sheet_to_csv(e,{FS:null!==(n=null==o?void 0:o.delimiter)&&void 0!==n?n:","})})}getMimeType(){return _e}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(S))},i.\u0275prov=(0,t.Yz7)({factory:function(){return new i((0,t.LFG)(S))},token:i,providedIn:"root"}),i})(),Ce=(()=>{class i extends Q{constructor(){super()}createContent(e,o){return(0,y.mG)(this,void 0,void 0,function*(){let n="";return e.forEach(r=>{n+=Object.values(r).join(this.getDelimiter(o))+"\n"}),n})}getMimeType(){return me}getDelimiter(e){return e&&e.delimiter?e.delimiter:"\t"}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=(0,t.Yz7)({factory:function(){return new i},token:i,providedIn:"root"}),i})(),st=(()=>{class i extends rt{constructor(e){super(e)}workSheetToContent(e,o={}){return(0,y.mG)(this,void 0,void 0,function*(){const{utils:n,write:r}=yield this.sheetJsHelper.getXlsx(),l=n.book_new();return o.columnWidths&&(e["!cols"]=this.convertToWch(o.columnWidths)),this.correctTypes(o),n.book_append_sheet(l,e,o.sheet),r(l,o)})}getMimeType(){return de}correctTypes(e){e.type||(e.type="array"),e.bookType=this.getMimeType().extension.replace(".","")}convertToWch(e){return e.map(o=>({wch:o}))}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(S))},i.\u0275prov=(0,t.Yz7)({factory:function(){return new i((0,t.LFG)(S))},token:i,providedIn:"root"}),i})(),Te=(()=>{class i extends Q{constructor(){super()}createContent(e,o){return(0,y.mG)(this,void 0,void 0,function*(){return JSON.stringify(e)})}getMimeType(){return ue}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=(0,t.Yz7)({factory:function(){return new i},token:i,providedIn:"root"}),i})(),lt=(()=>{class i extends st{constructor(e){super(e)}getMimeType(){return pe}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(S))},i.\u0275prov=(0,t.Yz7)({factory:function(){return new i((0,t.LFG)(S))},token:i,providedIn:"root"}),i})(),ct=(()=>{class i{constructor(e){this.injector=e}getService(e){switch(e){case _.XLS.valueOf():return this.injector.get(st);case _.XLSX.valueOf():return this.injector.get(lt);case _.JSON.valueOf():return this.injector.get(Te);case _.TXT.valueOf():return this.injector.get(Ce);case _.CSV.valueOf():return this.injector.get(xe);case _.OTHER.valueOf():return null;default:return this.injector.get(lt)}}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(t.zs3))},i.\u0275prov=(0,t.Yz7)({factory:function(){return new i((0,t.LFG)(t.gxx))},token:i,providedIn:"root"}),i})(),we=(()=>{class i{constructor(e,o,n,r){this.renderer=e,this.serviceLocator=o,this.dataExtractor=n,this._cdkTable=r,this.exportCompleted=new t.vpe,this.exportStarted=new t.vpe}exportTable(e,o){this.loadExporter(e),this._options=o,this.exportStarted.emit(),this._isIterating=!0,this._isExporting=!0,this._data=new Array,this.extractTableHeader();try{this.exportWithPagination()}catch(n){this.exportSinglePage()}}toggleRow(e){const o=this.getPaginatedRowIndex(e);this.isToggleOn(o)?this.toggleOff(o):this.toggleOn(o)}resetToggleRows(){this._selectedRows=[]}toggleOn(e){this._selectedRows=[...this._selectedRows||[],e]}toggleOff(e){this._selectedRows=this._selectedRows.filter(o=>o!==e)}isToggleOn(e){var o;return null===(o=this._selectedRows)||void 0===o?void 0:o.includes(e)}loadExporter(e){this._exporterService=e===_.OTHER.valueOf()?this.exporter:this.serviceLocator.getService(e)}exportWithPagination(){this._initialPageIndex=this.getCurrentPageIndex(),this.initPageHandler(),this.goToPage(0)}exportSinglePage(){this.extractDataOnCurrentPage(),this.extractTableFooter(),this.exportExtractedData()}extractDataOnCurrentPage(){const e=this.dataExtractor.extractRows(this._cdkTable,this.hiddenColumns);this._data=this._data.concat(this.getSelectedRows(e))}getSelectedRows(e){return this.isSelectiveExport()?e.filter((o,n)=>this._selectedRows.includes(this.getPaginatedRowIndex(n))):e}isSelectiveExport(){return this._selectedRows&&!this.isMasterToggleOff()&&!this.isMasterToggleOn()}isMasterToggleOn(){return this.compareSelectedRowCount(this.getTotalItemsCount())}isMasterToggleOff(){return this.compareSelectedRowCount(0)}compareSelectedRowCount(e){var o;return(null===(o=this._selectedRows)||void 0===o?void 0:o.length)===e}initPageHandler(){this._subscription||(this._subscription=this.getPageChangeObservable().subscribe(()=>{setTimeout(()=>{this._isIterating?(this.extractDataOnCurrentPage(),this.hasNextPage()?this.nextPage():(this._isIterating=!1,this.goToPage(this._initialPageIndex))):this._isExporting&&(this._isExporting=!1,this.extractTableFooter(),this.exportExtractedData())})}))}exportExtractedData(){this._exporterService.export(this._data,this._options),this._data=new Array,this.exportCompleted.emit()}extractSpecialRows(e){this._data.push(...this.dataExtractor.extractRows(this._cdkTable,this.hiddenColumns,e))}extractTableHeader(){this.extractSpecialRows(this._cdkTable._headerRowOutlet)}extractTableFooter(){this.extractSpecialRows(this._cdkTable._footerRowOutlet)}hasNextPage(){return this.getCurrentPageIndex()<this.getPageCount()-1}nextPage(){this.goToPage(this.getCurrentPageIndex()+1)}getPaginatedRowIndex(e){return e+this.getPageSize()*this.getCurrentPageIndex()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.Qsj),t.Y36(ct),t.Y36(at),t.Y36(void 0))},i.\u0275dir=t.lG2({type:i,inputs:{hiddenColumns:"hiddenColumns",exporter:"exporter"},outputs:{exportCompleted:"exportCompleted",exportStarted:"exportStarted"}}),i})(),dt=(()=>{class i extends we{constructor(e,o,n,r){super(e,o,n,r)}ngAfterViewInit(){this.exportStarted.subscribe(e=>{this.enablePaginator(!1)}),this.exportCompleted.subscribe(e=>{this.enablePaginator(!0)})}getPageCount(){return this.getPaginator().getNumberOfPages()}getPageSize(){var e,o;return null!==(o=null===(e=this.getPaginator())||void 0===e?void 0:e.pageSize)&&void 0!==o?o:0}getCurrentPageIndex(){var e,o;return null!==(o=null===(e=this.getPaginator())||void 0===e?void 0:e.pageIndex)&&void 0!==o?o:0}getTotalItemsCount(){var e,o,n,r,l;return null!==(l=null!==(o=null===(e=this.getPaginator())||void 0===e?void 0:e.length)&&void 0!==o?o:null===(r=null===(n=this.getDataSource())||void 0===n?void 0:n.data)||void 0===r?void 0:r.length)&&void 0!==l?l:0}goToPage(e){this.getPaginator().pageIndex=e,this.getPaginator()._changePageSize(this.getPaginator().pageSize)}getPageChangeObservable(){return this.getPaginator().page}getDataSource(){return this._cdkTable.dataSource}getPaginator(){return this.getDataSource().paginator}enablePaginator(e){this.getPaginator()&&(this.getPaginator().disabled=!e,this.getPaginator()._changePageSize(this.getPaginator().pageSize))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.Qsj),t.Y36(ct),t.Y36(at),t.Y36(d.BZ,11))},i.\u0275dir=t.lG2({type:i,selectors:[["","matTableExporter",""]],exportAs:["matTableExporter"],features:[t.qOj]}),i})(),ke=(()=>{class i{static forRoot(e){return{ngModule:i,providers:[{provide:B,useValue:e.xlsxLightWeight}]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[d.p0,ee]]}),i})();var De=c(7238);function ye(i,a){if(1&i&&(t.TgZ(0,"label"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij("",e.label," ")}}function Se(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"label",26),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().openTaskDialogDetail(n.key)}),t._uU(1),t.qZA()}if(2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij("",e.label," ")}}function Ze(i,a){if(1&i&&(t.TgZ(0,"th",23),t.YNc(1,ye,2,1,"label",24),t.YNc(2,Se,2,1,"label",25),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",!e.editable),t.xp6(1),t.Q6J("ngIf",e.editable)}}function Ae(i,a){if(1&i&&(t.TgZ(0,"a",33),t._uU(1),t.qZA()),2&i){const e=t.oxw(3).$implicit,o=t.oxw().$implicit;t.Q6J("ngClass",e[o.key].observaciones?"font-bold text-blue-600":"")("matTooltip",e[o.key].observaciones),t.xp6(1),t.hij("",e[o.key].dato?e[o.key].dato:"S/C"," ")}}function Ee(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",34),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3).$implicit,r=t.oxw().$implicit;return t.oxw().openTaskScoreDialog(n[r.key].id)}),t._uU(1),t.qZA()}if(2&i){const e=t.oxw(3).$implicit,o=t.oxw().$implicit;t.Q6J("matTooltip",e[o.key].observaciones)("ngClass",e[o.key].observaciones?"font-bold text-blue-600":""),t.xp6(1),t.hij("",e[o.key].dato?e[o.key].dato:"S/C"," ")}}function Ne(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,Ae,2,3,"a",31),t.YNc(2,Ee,2,3,"a",32),t.qZA()),2&i){const e=t.oxw(2).$implicit,o=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",!e[o.key].editable),t.xp6(1),t.Q6J("ngIf",e[o.key].editable)}}function Me(i,a){if(1&i&&(t.TgZ(0,"div",29),t.YNc(1,Ne,3,2,"span",30),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.Q6J("ngSwitch",e.type)}}function Oe(i,a){if(1&i&&(t.TgZ(0,"td",27),t.YNc(1,Me,2,1,"div",28),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",!e.isEdit)}}function Fe(i,a){1&i&&(t.ynx(0,20),t.YNc(1,Ze,3,2,"th",21),t.YNc(2,Oe,2,1,"td",22),t.BQk()),2&i&&t.Q6J("matColumnDef",a.$implicit.key)}function Pe(i,a){1&i&&t._UZ(0,"tr",35)}function Ie(i,a){1&i&&t._UZ(0,"tr",36)}let Je=(()=>{class i{constructor(e,o,n,r,l){this.data=e,this.dialogRef=o,this.dialog=n,this.provider=r,this.spinner=l,this.message="Adjust window width to 400px to see the effect.",this.spinner.show(),this.provider.BD_ActionPostHeder("clases","alumnosParcial",{id_materia_maestro:this.data.id_materia_maestro,tbl_grupo_id:this.data.tbl_grupo_id,tbl_materias_id:this.data.tbl_materias_id,tbl_periodo_id:this.data.tbl_periodo_id,fecha:this.data.fecha,tbl_parciales_generales_id:this.data.data.id}).subscribe({next:u=>{this.displayedColumns2=u.columns[0].map(f=>f.key),this.dataSource2=u.data,this.editable=u.editable,this.columnsSchema=u.columns[0],this.spinner.hide()},error:u=>{this.spinner.hide()}})}ngOnInit(){this.parcial=this.data.data.contador,this.fecha_inicial=this.data.data.fecha_inicial,this.fecha_final=this.data.data.fecha_final,this.id_materia_maestro=this.data.id_materia_maestro}onClose(){this.dialogRef.close(!0)}openDialog(){this.dialog.open(W,{width:"25%",data:{data:this.data,id_materia_maestro:this.id_materia_maestro}}).afterClosed().subscribe(o=>{this.spinner.show(),this.provider.BD_ActionPostHeder("clases","alumnosParcial",{id_materia_maestro:this.data.id_materia_maestro,tbl_grupo_id:this.data.tbl_grupo_id,tbl_materias_id:this.data.tbl_materias_id,tbl_periodo_id:this.data.tbl_periodo_id,fecha:this.data.fecha,tbl_parciales_generales_id:this.data.data.id}).subscribe({next:n=>{this.displayedColumns2=n.columns[0].map(r=>r.key),this.dataSource2=n.data,this.columnsSchema=n.columns[0],this.spinner.hide()},error:n=>{this.spinner.hide()}})})}openTaskDialogDetail(e){this.dialog.open(Jt,{width:"25%",data:{data:this.data,id:e,id_materia_maestro:this.id_materia_maestro}}).afterClosed().subscribe(n=>{this.refreshTable()})}openTipoTaskDialog(){this.dialog.open(Ot,{width:"25%",data:{data:this.data,id_materia_maestro:this.id_materia_maestro}})}openTaskScoreDialog(e){console.log(e),this.dialog.open(Mt,{width:"25%",data:{data:this.data,id_materia_maestro:this.id_materia_maestro,id:e}}).afterClosed().subscribe(n=>{this.refreshTable()})}asignarCalificacionTask(e){alert(e)}validarNombre(e){return!!e&&e.length>5}refreshTable(){return this.spinner.show(),this.provider.BD_ActionPostHeder("clases","alumnosParcial",{id_materia_maestro:this.data.id_materia_maestro,tbl_grupo_id:this.data.tbl_grupo_id,tbl_materias_id:this.data.tbl_materias_id,tbl_periodo_id:this.data.tbl_periodo_id,fecha:this.data.fecha,tbl_parciales_generales_id:this.data.data.id}).subscribe({next:e=>{console.log(e),this.displayedColumns2=e.columns[0].map(o=>o.key),this.dataSource2=e.data,this.columnsSchema=e.columns[0],this.spinner.hide()},error:e=>{this.spinner.hide()}})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(p.WI),t.Y36(p.so),t.Y36(p.uw),t.Y36(x.H),t.Y36(et))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-sabana-dialog"]],decls:33,vars:11,consts:[[1,"fixed","top-0","left-0","right-0","z-50","bg-white","px-2","sm:px-2","py-3","rounded-br-xl","rounded-bl-xl","dark:bg-white"],[1,"container","flex","flex-wrap","justify-between","items-center","mx-auto"],["mat-icon-button","","mat-dialog-close","",1,"text-gray-500"],[1,"pl-4","font-bold"],[1,"flex","items-center","sm:order-2"],[1,"flex","text-sm","text-white","font-bold","disabled:bg-gray-300","bg-itses-blue","p-2","rounded-tl-lg","rounded-bl-lg","sm:mr-0",3,"disabled","click"],["mat-button","","mat-icon-button","",1,"relative","z-10","block","rounded-md","bg-white","p-2","focus:outline-none",3,"matMenuTriggerFor"],["xPosition","before"],["menu","matMenu"],["mat-menu-item","",3,"disabled","click"],["mat-menu-item","",3,"click"],["bdColor","rgba(0, 0, 0, 0.8)","size","large","color","#fff","type","square-jelly-box",3,"fullScreen"],[2,"color","white"],[1,"pt-20","overflow-x-auto"],["mat-table","","matTableExporter","",3,"dataSource"],["exporter","matTableExporter"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["align","center"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell",""],[4,"ngIf"],["class","cursor-pointer",3,"click",4,"ngIf"],[1,"cursor-pointer",3,"click"],["mat-cell",""],[3,"ngSwitch",4,"ngIf"],[3,"ngSwitch"],[4,"ngSwitchDefault"],[3,"ngClass","matTooltip",4,"ngIf"],["class","cursor-pointer",3,"matTooltip","ngClass","click",4,"ngIf"],[3,"ngClass","matTooltip"],[1,"cursor-pointer",3,"matTooltip","ngClass","click"],["mat-header-row",""],["mat-row",""]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"nav",0)(1,"div",1)(2,"div")(3,"button",2)(4,"mat-icon"),t._uU(5," close "),t.qZA()(),t.TgZ(6,"label",3),t._uU(7,"Sabana de calificaciones"),t.qZA()(),t.TgZ(8,"div",4)(9,"button",5),t.NdJ("click",function(){return o.openDialog()}),t._uU(10," Crear actividad "),t.qZA(),t.TgZ(11,"button",6)(12,"mat-icon"),t._uU(13," keyboard_arrow_down "),t.qZA()(),t.TgZ(14,"mat-menu",7,8)(16,"button",9),t.NdJ("click",function(){return o.openTipoTaskDialog()}),t._uU(17," Crear tipo de actividad "),t.qZA(),t.TgZ(18,"button",10),t.NdJ("click",function(){return t.CHM(n),t.MAs(28).exportTable("xlsx",{fileName:"parcial"})}),t._uU(19," Exportar "),t.qZA()()()()(),t.TgZ(20,"mat-dialog-content")(21,"ngx-spinner",11)(22,"p",12),t._uU(23,"Cargando..."),t.qZA()(),t.TgZ(24,"div",13)(25,"label"),t._uU(26),t.qZA(),t.TgZ(27,"table",14,15),t.YNc(29,Fe,3,1,"ng-container",16),t.YNc(30,Pe,1,0,"tr",17),t.YNc(31,Ie,1,0,"tr",18),t.qZA()()(),t._UZ(32,"mat-dialog-actions",19)}if(2&e){const n=t.MAs(15);t.xp6(9),t.Q6J("disabled",!o.editable),t.xp6(2),t.Q6J("matMenuTriggerFor",n),t.xp6(5),t.Q6J("disabled",!o.editable),t.xp6(5),t.Q6J("fullScreen",!1),t.xp6(5),t.lnq("Parcial: ",o.parcial,", del ",o.fecha_inicial," al ",o.fecha_final,""),t.xp6(1),t.Q6J("dataSource",o.dataSource2),t.xp6(2),t.Q6J("ngForOf",o.columnsSchema),t.xp6(1),t.Q6J("matHeaderRowDef",o.displayedColumns2),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns2)}},directives:[C.lW,p.ZT,R.Hw,D.p6,D.VK,D.OP,p.xY,Vt,d.BZ,dt,m.sg,d.w1,d.fO,d.ge,m.O5,d.Dz,d.ev,m.RF,m.ED,m.mk,De.gM,d.as,d.XQ,d.nj,d.Gk,p.H8],styles:[".full-screen-modal[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:1em;width:100%;height:100%}table[_ngcontent-%COMP%]{width:100%}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:25%}"]}),i})();var pt=c(3251);function Re(i,a){1&i&&(t.TgZ(0,"th",30),t._uU(1,"Alumno"),t.qZA())}function Ye(i,a){if(1&i&&(t.TgZ(0,"td",31),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.lnq(" ",e.apellido_paterno," ",e.apellido_materno," ",e.nombre_alumno," ")}}function Ue(i,a){1&i&&(t.TgZ(0,"th",30),t._uU(1," Correo electr\xf3nico "),t.qZA())}function qe(i,a){if(1&i&&(t.TgZ(0,"td",31),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.hij(" ",e.email," ")}}function He(i,a){1&i&&(t.TgZ(0,"th",30),t._uU(1," Calificaci\xf3n final "),t.qZA())}function Be(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"a",34),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit,r=t.oxw();return n.isEdit=!n.isEdit,r.changeEditable()}),t._uU(2),t.qZA()()}if(2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngClass",e.calificacion<7?"text-red-500":"text-black"),t.xp6(1),t.hij(" ",e.calificacion?e.calificacion:"Sin calificaci\xf3n","")}}function je(i,a){if(1&i&&(t.TgZ(0,"div")(1,"a",35),t._uU(2),t.qZA()()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngClass",e.calificacion<7?"text-red-500":"text-black"),t.xp6(1),t.hij(" ",e.calificacion?e.calificacion:"Sin calificaci\xf3n","")}}function Qe(i,a){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,Be,3,2,"div",32),t.YNc(2,je,3,2,"div",32),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.enableEdit),t.xp6(1),t.Q6J("ngIf",!e.enableEdit)}}function Le(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",36)(1,"form",37)(2,"mat-form-field")(3,"input",38),t.NdJ("keyup",function(n){return t.CHM(e),t.oxw(2).applyValidator(n)}),t.qZA()()(),t.TgZ(4,"button",39),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,r=t.oxw();return n.isEdit=!n.isEdit,r.asignarCalificacion(n.id_alumno_materia)}),t.TgZ(5,"mat-icon"),t._uU(6,"check"),t.qZA()(),t.TgZ(7,"button",40),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,r=t.oxw();return n.isEdit=!n.isEdit,r.changeEditable()}),t.TgZ(8,"mat-icon"),t._uU(9,"close"),t.qZA()()()}if(2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("formGroup",e.editCalificacionForm),t.xp6(3),t.Q6J("ngClass",e.editCalificacionForm.invalid?"":"hover:bg-green-600 hover:text-white")("disabled",e.editCalificacionForm.invalid)}}function Xe(i,a){if(1&i&&(t.TgZ(0,"td",31),t.YNc(1,Qe,3,2,"div",32),t.YNc(2,Le,10,3,"div",33),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",!e.isEdit),t.xp6(1),t.Q6J("ngIf",e.isEdit)}}function $e(i,a){1&i&&(t.TgZ(0,"th",30),t._uU(1," Observaciones "),t.qZA())}function ze(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"a",41),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit,r=t.oxw();return n.isEdit2=!n.isEdit2,r.changeEditable()}),t._uU(2),t.qZA()()}if(2&i){const e=t.oxw(2).$implicit;t.xp6(2),t.hij(" ",e.observaciones?e.observaciones:"Sin observaciones","")}}function Ge(i,a){if(1&i&&(t.TgZ(0,"div")(1,"a"),t._uU(2),t.qZA()()),2&i){const e=t.oxw(2).$implicit;t.xp6(2),t.hij(" ",e.observaciones?e.observaciones:"Sin observaciones","")}}function Ve(i,a){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,ze,3,1,"div",32),t.YNc(2,Ge,3,1,"div",32),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.enableEdit),t.xp6(1),t.Q6J("ngIf",!e.enableEdit)}}function We(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",36)(1,"form",37)(2,"mat-form-field")(3,"input",42),t.NdJ("keyup",function(n){return t.CHM(e),t.oxw(2).applyValidator(n)}),t.qZA()()(),t.TgZ(4,"button",39),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,r=t.oxw();return n.isEdit2=!n.isEdit2,r.asignarObservacion(n.id_alumno_materia)}),t.TgZ(5,"mat-icon"),t._uU(6,"check"),t.qZA()(),t.TgZ(7,"button",40),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,r=t.oxw();return n.isEdit2=!n.isEdit2,r.changeEditable()}),t.TgZ(8,"mat-icon"),t._uU(9,"close"),t.qZA()()()}if(2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("formGroup",e.editObservacionForm),t.xp6(3),t.Q6J("ngClass",e.editObservacionForm.invalid?"":"hover:bg-green-600 hover:text-white")("disabled",e.editObservacionForm.invalid)}}function Ke(i,a){if(1&i&&(t.TgZ(0,"td",31),t.YNc(1,Ve,3,2,"div",32),t.YNc(2,We,10,3,"div",33),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",!e.isEdit2),t.xp6(1),t.Q6J("ngIf",e.isEdit2)}}function ti(i,a){1&i&&t._UZ(0,"tr",43)}function ei(i,a){1&i&&t._UZ(0,"tr",44)}function ii(i,a){if(1&i&&(t.TgZ(0,"tr",45)(1,"td",46),t._uU(2),t.qZA()()),2&i){t.oxw();const e=t.MAs(20);t.xp6(2),t.hij(' No hay datos que coincidan con el filtro "',e.value,'" ')}}function oi(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",47),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw().openDialog(r)}),t.TgZ(1,"div",48),t._UZ(2,"img",49),t.TgZ(3,"p",50),t._uU(4),t.qZA(),t.TgZ(5,"p",51),t._uU(6),t.qZA()()()}if(2&i){const e=a.$implicit;t.xp6(4),t.hij(" Parcial: ",e.contador," "),t.xp6(2),t.AsE(" Del ",e.fecha_inicial," al ",e.fecha_final," ")}}const ai=function(){return[50,100]},ni=[{path:"",component:_t},{path:"detail/:id_materia_maestro/:id_materia/:id_grupo/:id_periodo/:fecha",component:(()=>{class i{constructor(e,o,n,r,l,u){this.fb=e,this.provider=o,this.route=n,this._snackBar=r,this.dialog=l,this.router=u,this.displayedColumns=["alumno","email","calificacion","observaciones"],this.colorControl=new s.NI("primary"),this.enableEdit=!0,this.editCalificacionForm=new s.cw({calificacion:new s.NI("",s.kI.required)}),this.editObservacionForm=new s.cw({observacion:new s.NI("",s.kI.required)}),this._tbl_grupo_id=0,this._tbl_materias_id=0,this._tbl_periodo_id=0,this._id_materia_maestro=0,this.id_materia_maestro=0,this.programa=0,this._fecha="",this.materia="",this.grupo="",this.periodo="",this.fecha="",this.route.params.subscribe(f=>{this._tbl_grupo_id=parseInt(atob(f.id_grupo)),this._tbl_materias_id=parseInt(atob(f.id_materia)),this._tbl_periodo_id=parseInt(atob(f.id_periodo)),this._id_materia_maestro=parseInt(atob(f.id_materia_maestro)),this._fecha=atob(f.fecha)}),this.provider.BD_ActionPostHeder("clases","clase",{materia:this._tbl_materias_id,fecha:this._fecha,grupo:this._tbl_grupo_id,periodo:this._tbl_periodo_id}).subscribe({next:f=>{this.materia=f[0].nombre,this.grupo=f[0].grupo,this.periodo=f[0].periodo,this.fecha=f[0].fecha,this.programa=f[0].id_programa_academico,this.dataGeneral=f,this.dataSource=new d.by(f),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.provider.BD_ActionPostHeder("clases","claseParciales",{fecha:this._fecha,periodo:this._tbl_periodo_id,programa:this.programa}).subscribe({next:M=>{this.parciales=M},error:M=>{}})},error:f=>{}})}ngOnInit(){}ngAfterViewInit(){}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}applyValidator(e){let o=e.target.value,n=o.split(".");if(parseFloat(n[0])>10&&(e.target.value="10",this.editCalificacionForm.value.calificacion="10"),n.length>=2&&n[1]&&"5"!=n[1]){let r=Math.round(parseFloat(o)).toString();e.target.value=r,this.editCalificacionForm.value.calificacion=r}o.includes(".")}asignarCalificacion(e){this.editCalificacionForm.value.id=e,this.provider.BD_ActionPostHeder("clases","asignarCalificacion",this.editCalificacionForm.value).subscribe({next:n=>{if(1===n.Mensaje){let r=this.editCalificacionForm.value.calificacion;this.dataGeneral.map(function(l){return l.id_alumno_materia==e&&(l.calificacion=r),l}),this.dataSource=new d.by(this.dataGeneral),this.editCalificacionForm=new s.cw({calificacion:new s.NI("",s.kI.required)}),this._snackBar.open("Proceso ejecutado con exito","",{duration:5e3})}else this._snackBar.open("Error","",{duration:5e3})},error:n=>{this._snackBar.open("Error","",{duration:5e3})}}),this.enableEdit=!this.enableEdit}asignarObservacion(e){this.editObservacionForm.value.id=e,this.provider.BD_ActionPostHeder("clases","asignarObservacion",this.editObservacionForm.value).subscribe({next:n=>{if(1===n.Mensaje){let r=this.editObservacionForm.value.observacion;this.dataGeneral.map(function(l){return l.id_alumno_materia==e&&(l.observaciones=r),l}),this.dataSource=new d.by(this.dataGeneral),this.editObservacionForm=new s.cw({observacion:new s.NI("",s.kI.required)}),this._snackBar.open("Proceso ejecutado con exito","",{duration:5e3})}else this._snackBar.open("Error","",{duration:5e3})},error:n=>{this._snackBar.open("Error","",{duration:5e3})}}),this.enableEdit=!this.enableEdit}changeEditable(){return this.editCalificacionForm=new s.cw({calificacion:new s.NI("",s.kI.required)}),this.editObservacionForm=new s.cw({observacion:new s.NI("",s.kI.required)}),this.enableEdit=!this.enableEdit}openParcial(e){this.router.navigate(["/clases/detail-parciales",btoa(e.id.toString()),btoa(this._id_materia_maestro.toString()),btoa(this._tbl_materias_id.toString()),btoa(this._tbl_grupo_id.toString()),btoa(this._tbl_periodo_id.toString()),btoa(this._fecha)])}openDialog(e){this.dialog.open(Je,{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%",panelClass:"full-screen-modal",data:{data:e,id_materia_maestro:this._id_materia_maestro,tbl_grupo_id:this._tbl_grupo_id,tbl_materias_id:this._tbl_materias_id,tbl_periodo_id:this._tbl_periodo_id,fecha:this._fecha}})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(s.qu),t.Y36(x.H),t.Y36(Z.gz),t.Y36(A.ux),t.Y36(p.uw),t.Y36(Z.F0))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-detail"]],viewQuery:function(e,o){if(1&e&&(t.Gf(tt.NW,5),t.Gf(J.YE,5)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},decls:47,vars:10,consts:[[1,"grid","grid-cols-12","px-18","gap-5","pb-4"],[1,"col-span-12"],[1,"text-gray-600","text-3xl","font-semibold","uppercase"],[1,"text-gray-500","text-lg","font-normal","uppercase"],[1,"font-bold"],["mat-align-tabs","start"],["label","Alumnos inscritos"],[1,"flex","justify-between"],["appearance","standard"],["matInput","","placeholder","Nombre del alumno",3,"keyup"],["input",""],[1,"pt-4"],["mat-button","",1,"bg-green-600","text-white",3,"click"],[1,"mat-elevation-z8"],["mat-table","","matSort","","matTableExporter","",3,"dataSource"],["exporter","matTableExporter"],["matColumnDef","alumno"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","email"],["matColumnDef","calificacion"],["matColumnDef","observaciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users",3,"pageSizeOptions"],["label","Parciales"],[1,"flex","items-center","justify-center","pt-8","pb-8"],[1,"grid","grid-cols-12","px-18","gap-5"],["class","2xl:col-span-3 xl:col-span-3 lg:col-span-3 md:col-span-6 sm:col-span-6 xm:col-span-12 col-span-12",3,"click",4,"ngFor","ngForOf"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[4,"ngIf"],["class","m-0 flex",4,"ngIf"],[1,"cursor-pointer",3,"ngClass","click"],[3,"ngClass"],[1,"m-0","flex"],[1,"",3,"formGroup"],["matInput","","formControlName","calificacion","required","","pattern","^[0-9]+([.])?([0-9]+)?$",3,"keyup"],["mat-button","",3,"ngClass","disabled","click"],["mat-button","",1,"hover:bg-red-600","hover:text-white",3,"click"],[1,"cursor-pointer",3,"click"],["matInput","","formControlName","observacion","required","",3,"keyup"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"],[1,"2xl:col-span-3","xl:col-span-3","lg:col-span-3","md:col-span-6","sm:col-span-6","xm:col-span-12","col-span-12",3,"click"],[1,"bg-white","shadow-lg","hover:shadow-xl","hover:-mt-2","rounded-xl","h-48","w-full","cursor-pointer"],["src","https://a0.muscache.com/im/pictures/a433b4d0-8183-4523-b4c5-99b81c5729c1.jpg?im_w=320",1,"rounded-t-xl","max-h-28","w-full"],[1,"pt-1","pr-3","pl-3","text-gray-500","font-bold"],[1,"text-sm","pt-0","pr-3","pl-3","text-gray-500"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"p",2),t._uU(3),t.qZA(),t.TgZ(4,"p",3)(5,"label",4),t._uU(6,"Periodo: "),t.qZA(),t._uU(7),t.qZA(),t.TgZ(8,"p",3)(9,"label",4),t._uU(10,"Grupo: "),t.qZA(),t._uU(11),t.qZA()()(),t.TgZ(12,"mat-tab-group",5)(13,"mat-tab",6)(14,"div",7)(15,"div")(16,"mat-form-field",8)(17,"mat-label"),t._uU(18,"Filtro"),t.qZA(),t.TgZ(19,"input",9,10),t.NdJ("keyup",function(l){return o.applyFilter(l)}),t.qZA()()(),t.TgZ(21,"div",11)(22,"button",12),t.NdJ("click",function(){return t.CHM(n),t.MAs(26).exportTable("xlsx",{fileName:"Lista"})}),t._uU(23," Exportar "),t.qZA()()(),t.TgZ(24,"div",13)(25,"table",14,15),t.ynx(27,16),t.YNc(28,Re,2,0,"th",17),t.YNc(29,Ye,2,3,"td",18),t.BQk(),t.ynx(30,19),t.YNc(31,Ue,2,0,"th",17),t.YNc(32,qe,2,1,"td",18),t.BQk(),t.ynx(33,20),t.YNc(34,He,2,0,"th",17),t.YNc(35,Xe,3,2,"td",18),t.BQk(),t.ynx(36,21),t.YNc(37,$e,2,0,"th",17),t.YNc(38,Ke,3,2,"td",18),t.BQk(),t.YNc(39,ti,1,0,"tr",22),t.YNc(40,ei,1,0,"tr",23),t.YNc(41,ii,3,1,"tr",24),t.qZA(),t._UZ(42,"mat-paginator",25),t.qZA()(),t.TgZ(43,"mat-tab",26)(44,"div",27)(45,"div",28),t.YNc(46,oi,7,3,"a",29),t.qZA()()()()}2&e&&(t.xp6(3),t.hij(" ",o.materia," "),t.xp6(4),t.AsE(" ",o.periodo," ",o.fecha," "),t.xp6(4),t.hij("",o.grupo," "),t.xp6(14),t.Q6J("dataSource",o.dataSource),t.xp6(14),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(9,ai)),t.xp6(4),t.Q6J("ngForOf",o.parciales))},directives:[pt.SP,pt.uX,g.KE,g.hX,k.Nt,C.lW,d.BZ,J.YE,dt,d.w1,d.fO,d.ge,J.nU,d.Dz,d.ev,m.O5,m.mk,s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u,s.Q7,s.c5,R.Hw,d.as,d.XQ,d.nj,d.Gk,d.Ee,tt.NW,m.sg],styles:["table[_ngcontent-%COMP%]{width:100%}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:25%}"]}),i})()},{path:"detail-parciales/:id_parcial_general/:id_materia_maestro/:id_materia/:id_grupo/:id_periodo/:fecha",component:Nt}];let ri=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[Z.Bz.forChild(ni)],Z.Bz]}),i})();var si=c(520),li=c(6757),ci=c(313);let di=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[{provide:si.TP,useClass:li.O,multi:!0}],imports:[[m.ez,ri,ci.q,s.u5,s.UX,ke,Wt]]}),i})()}}]);